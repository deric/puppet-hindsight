# Reference

<!-- DO NOT EDIT: This document was generated by Puppet Strings -->

## Table of Contents

### Classes

* [`hindsight`](#hindsight): Manage Hidsight service configuration
* [`hindsight::config`](#hindsight--config): Internal class, should not be called directly.
Manages directory structure for Hindsight configuration files
* [`hindsight::install`](#hindsight--install): Ensures installation of system packages (RPM/deb/etc.)
This class is called from hindsight for install.
* [`hindsight::params`](#hindsight--params): Default param values
* [`hindsight::service`](#hindsight--service): Manage Hindsight service

### Defined types

* [`hindsight::plugin`](#hindsight--plugin): Hindsight plugin configuration

### Functions

* [`hindsight_escape`](#hindsight_escape): Escape string values

## Classes

### <a name="hindsight"></a>`hindsight`

Manage Hidsight service configuration

#### Parameters

The following parameters are available in the `hindsight` class:

* [`max_message_size`](#-hindsight--max_message_size)
* [`package`](#-hindsight--package)
* [`modules`](#-hindsight--modules)
* [`user`](#-hindsight--user)
* [`group`](#-hindsight--group)
* [`service_name`](#-hindsight--service_name)
* [`service_ensure`](#-hindsight--service_ensure)
* [`manage_service`](#-hindsight--manage_service)
* [`service_prestart`](#-hindsight--service_prestart)
* [`conf_dir`](#-hindsight--conf_dir)
* [`output_dir`](#-hindsight--output_dir)
* [`decoders_dir`](#-hindsight--decoders_dir)
* [`run_dir`](#-hindsight--run_dir)
* [`analysis_lua_path`](#-hindsight--analysis_lua_path)
* [`analysis_lua_cpath`](#-hindsight--analysis_lua_cpath)
* [`purge_configs`](#-hindsight--purge_configs)
* [`analysis_threads`](#-hindsight--analysis_threads)
* [`io_lua_path`](#-hindsight--io_lua_path)
* [`io_lua_cpath`](#-hindsight--io_lua_cpath)
* [`analysis_defaults`](#-hindsight--analysis_defaults)
* [`input_defaults`](#-hindsight--input_defaults)
* [`output_defaults`](#-hindsight--output_defaults)
* [`package_ensure`](#-hindsight--package_ensure)
* [`hostname`](#-hindsight--hostname)
* [`output_size`](#-hindsight--output_size)

##### <a name="-hindsight--max_message_size"></a>`max_message_size`

Data type: `String`

max size in bytes default: 8e6 (8MB)

##### <a name="-hindsight--package"></a>`package`

Data type: `String`

Hindsight package name to be installed via system package

Default value: `$hindsight::params::package`

##### <a name="-hindsight--modules"></a>`modules`

Data type: `Array[String]`

Optional modules (luasandbox extensions e.g. `['luasandbox-lpeg']`)

Default value: `$hindsight::params::modules`

##### <a name="-hindsight--user"></a>`user`

Data type: `String`

The owner of config files

Default value: `$hindsight::params::user`

##### <a name="-hindsight--group"></a>`group`

Data type: `String`

The group for config files

Default value: `$hindsight::params::group`

##### <a name="-hindsight--service_name"></a>`service_name`

Data type: `String`

Name of service running Hindsight daemon

Default value: `$hindsight::params::service_name`

##### <a name="-hindsight--service_ensure"></a>`service_ensure`

Data type: `Variant[Boolean,String]`

Possible values `running`,`stoppped`,`true`, `false`

Default value: `$hindsight::params::service_ensure`

##### <a name="-hindsight--manage_service"></a>`manage_service`

Data type: `Boolean`

Whether Puppet should manage the service

Default value: `$hindsight::params::manage_service`

##### <a name="-hindsight--service_prestart"></a>`service_prestart`

Data type: `Array[String]`

Array of commands to be executed before hindsight service start

Default value: `[]`

##### <a name="-hindsight--conf_dir"></a>`conf_dir`

Data type: `Stdlib::Absolutepath`

Directory where main Hidsight configuration resides

Default value: `$hindsight::params::conf_dir`

##### <a name="-hindsight--output_dir"></a>`output_dir`

Data type: `Stdlib::Absolutepath`

Path where the protobuf streams, checkpoints and statistics are stored.

Default value: `$hindsight::params::output_dir`

##### <a name="-hindsight--decoders_dir"></a>`decoders_dir`

Data type: `Stdlib::Absolutepath`

Path to decoders

Default value: `$hindsight::params::decoders_dir`

##### <a name="-hindsight--run_dir"></a>`run_dir`

Data type: `Stdlib::Absolutepath`

Base path containing the running configis and dynamically loaded lua, by default `conf_dir/run`

Default value: `$hindsight::params::run_dir`

##### <a name="-hindsight--analysis_lua_path"></a>`analysis_lua_path`

Data type: `Stdlib::Absolutepath`

Path used by the analysis plugins to look for Lua modules

Default value: `$hindsight::params::analysis_lua_path`

##### <a name="-hindsight--analysis_lua_cpath"></a>`analysis_lua_cpath`

Data type: `Stdlib::Absolutepath`

Path used by the analysis plugins to look for Lua C modules

Default value: `$hindsight::params::analysis_lua_cpath`

##### <a name="-hindsight--purge_configs"></a>`purge_configs`

Data type: `Boolean`

Removed configs that are not managed by this module

Default value: `$hindsight::params::purge_configs`

##### <a name="-hindsight--analysis_threads"></a>`analysis_threads`

Data type: `Integer`

Number of threads for analysis

Default value: `1`

##### <a name="-hindsight--io_lua_path"></a>`io_lua_path`

Data type: `Stdlib::Absolutepath`

Path to look for Lua io modules

Default value: `$hindsight::params::io_lua_path`

##### <a name="-hindsight--io_lua_cpath"></a>`io_lua_cpath`

Data type: `Stdlib::Absolutepath`

Path to look for C io modules

Default value: `$hindsight::params::io_lua_cpath`

##### <a name="-hindsight--analysis_defaults"></a>`analysis_defaults`

Data type: `Hash`

Hash overriding default sandbox configuration variables. See https://mozilla-services.github.io/hindsight/configuration.html

Default value: `$hindsight::params::analysis_defaults`

##### <a name="-hindsight--input_defaults"></a>`input_defaults`

Data type: `Hash`

Hash overriding default sandbox configuration variables. See https://mozilla-services.github.io/hindsight/configuration.html

Default value: `$hindsight::params::input_defaults`

##### <a name="-hindsight--output_defaults"></a>`output_defaults`

Data type: `Hash`

Hash overriding default sandbox configuration variables. See https://mozilla-services.github.io/hindsight/configuration.html

Default value: `$hindsight::params::output_defaults`

##### <a name="-hindsight--package_ensure"></a>`package_ensure`

Data type: `String`

Ensure passed to installed packages

Default value: `'installed'`

##### <a name="-hindsight--hostname"></a>`hostname`

Data type: `Optional[String]`

Manually set hostname

Default value: `undef`

##### <a name="-hindsight--output_size"></a>`output_size`

Data type: `Integer`

in bytes (default 64MiB)

Default value: `64 * 1024 * 1024`

### <a name="hindsight--config"></a>`hindsight::config`

Internal class, should not be called directly.
Manages directory structure for Hindsight configuration files

#### Parameters

The following parameters are available in the `hindsight::config` class:

* [`user`](#-hindsight--config--user)
* [`group`](#-hindsight--config--group)
* [`conf_dir`](#-hindsight--config--conf_dir)
* [`output_dir`](#-hindsight--config--output_dir)
* [`run_dir`](#-hindsight--config--run_dir)
* [`analysis_lua_path`](#-hindsight--config--analysis_lua_path)
* [`analysis_lua_cpath`](#-hindsight--config--analysis_lua_cpath)
* [`io_lua_path`](#-hindsight--config--io_lua_path)
* [`io_lua_cpath`](#-hindsight--config--io_lua_cpath)
* [`analysis_threads`](#-hindsight--config--analysis_threads)
* [`purge_configs`](#-hindsight--config--purge_configs)
* [`analysis_defaults`](#-hindsight--config--analysis_defaults)
* [`input_defaults`](#-hindsight--config--input_defaults)
* [`output_defaults`](#-hindsight--config--output_defaults)
* [`file_ensure`](#-hindsight--config--file_ensure)
* [`dir_ensure`](#-hindsight--config--dir_ensure)
* [`hostname`](#-hindsight--config--hostname)
* [`max_message_size`](#-hindsight--config--max_message_size)
* [`output_size`](#-hindsight--config--output_size)

##### <a name="-hindsight--config--user"></a>`user`

Data type: `String`

The owner of config files

##### <a name="-hindsight--config--group"></a>`group`

Data type: `String`

The group for config files

##### <a name="-hindsight--config--conf_dir"></a>`conf_dir`

Data type: `Stdlib::Absolutepath`

Directory where main Hidsight configuration resides

##### <a name="-hindsight--config--output_dir"></a>`output_dir`

Data type: `Stdlib::Absolutepath`

Path where the protobuf streams, checkpoints and statistics are stored.

##### <a name="-hindsight--config--run_dir"></a>`run_dir`

Data type: `Stdlib::Absolutepath`

Base path containing the running configis and dynamically loaded lua, by default `conf_dir/run`

##### <a name="-hindsight--config--analysis_lua_path"></a>`analysis_lua_path`

Data type: `Stdlib::Absolutepath`

Path used by the analysis plugins to look for Lua modules

##### <a name="-hindsight--config--analysis_lua_cpath"></a>`analysis_lua_cpath`

Data type: `Stdlib::Absolutepath`

Path used by the analysis plugins to look for Lua C modules

##### <a name="-hindsight--config--io_lua_path"></a>`io_lua_path`

Data type: `Stdlib::Absolutepath`

Path to look for Lua io modules

##### <a name="-hindsight--config--io_lua_cpath"></a>`io_lua_cpath`

Data type: `Stdlib::Absolutepath`

Path to look for C io modules

##### <a name="-hindsight--config--analysis_threads"></a>`analysis_threads`

Data type: `Integer`

Number of threads for analysis

##### <a name="-hindsight--config--purge_configs"></a>`purge_configs`

Data type: `Boolean`

Removed configs that are not managed by this module

##### <a name="-hindsight--config--analysis_defaults"></a>`analysis_defaults`

Data type: `Hash`

Hash overriding default sandbox configuration variables. See https://mozilla-services.github.io/hindsight/configuration.html

##### <a name="-hindsight--config--input_defaults"></a>`input_defaults`

Data type: `Hash`

Hash overriding default sandbox configuration variables. See https://mozilla-services.github.io/hindsight/configuration.html

##### <a name="-hindsight--config--output_defaults"></a>`output_defaults`

Data type: `Hash`

Hash overriding default sandbox configuration variables. See https://mozilla-services.github.io/hindsight/configuration.html

##### <a name="-hindsight--config--file_ensure"></a>`file_ensure`

Data type: `String`

Ensure passed to config files

Default value: `'file'`

##### <a name="-hindsight--config--dir_ensure"></a>`dir_ensure`

Data type: `String`

Ensure passed to directories

Default value: `'directory'`

##### <a name="-hindsight--config--hostname"></a>`hostname`

Data type: `Optional[String]`

Manually set hostname

##### <a name="-hindsight--config--max_message_size"></a>`max_message_size`

Data type: `String`

in bytes

##### <a name="-hindsight--config--output_size"></a>`output_size`

Data type: `Integer`

in bytes

### <a name="hindsight--install"></a>`hindsight::install`

== Class hindsight::install

#### Parameters

The following parameters are available in the `hindsight::install` class:

* [`package`](#-hindsight--install--package)
* [`modules`](#-hindsight--install--modules)
* [`package_ensure`](#-hindsight--install--package_ensure)

##### <a name="-hindsight--install--package"></a>`package`

Data type: `String`

Hindsight package name to be installed via system package

##### <a name="-hindsight--install--modules"></a>`modules`

Data type: `Array[String]`

Optional modules (luasandbox extensions e.g. `['luasandbox-lpeg']`)

##### <a name="-hindsight--install--package_ensure"></a>`package_ensure`

Data type: `String`

Common ensure for all packages, e.g.: present | absent

Default value: `'installed'`

### <a name="hindsight--params"></a>`hindsight::params`

Default param values

### <a name="hindsight--service"></a>`hindsight::service`

Manage Hindsight service

#### Parameters

The following parameters are available in the `hindsight::service` class:

* [`service`](#-hindsight--service--service)
* [`ensure`](#-hindsight--service--ensure)
* [`conf_dir`](#-hindsight--service--conf_dir)
* [`prestart`](#-hindsight--service--prestart)

##### <a name="-hindsight--service--service"></a>`service`

Data type: `String`

Name of service running Hindsight daemon

##### <a name="-hindsight--service--ensure"></a>`ensure`

Data type: `Variant[Boolean,String]`

Possible values `running`,`stoppped`,`true`, `false`

##### <a name="-hindsight--service--conf_dir"></a>`conf_dir`

Data type: `Stdlib::Absolutepath`

Directory where main Hidsight configuration resides

##### <a name="-hindsight--service--prestart"></a>`prestart`

Data type: `Array[String]`

Array of commands to be executed before hindsight service start

Default value: `[]`

## Defined types

### <a name="hindsight--plugin"></a>`hindsight::plugin`

Hindsight plugin configuration

#### Parameters

The following parameters are available in the `hindsight::plugin` defined type:

* [`filename`](#-hindsight--plugin--filename)
* [`target`](#-hindsight--plugin--target)
* [`ensure`](#-hindsight--plugin--ensure)
* [`order`](#-hindsight--plugin--order)
* [`config`](#-hindsight--plugin--config)
* [`manage_service`](#-hindsight--plugin--manage_service)
* [`service_name`](#-hindsight--plugin--service_name)
* [`run_dir`](#-hindsight--plugin--run_dir)
* [`content`](#-hindsight--plugin--content)
* [`source`](#-hindsight--plugin--source)

##### <a name="-hindsight--plugin--filename"></a>`filename`

Data type: `String`

Name of Lua file to require

##### <a name="-hindsight--plugin--target"></a>`target`

Data type: `String`

Filename to write configuration (`.cfg` will be appended)

##### <a name="-hindsight--plugin--ensure"></a>`ensure`

Data type: `Enum['present','absent']`

Config file ensure (either `present` or `absent`)

Default value: `'present'`

##### <a name="-hindsight--plugin--order"></a>`order`

Data type: `Integer[1]`

Concat order (in config file)

Default value: `1`

##### <a name="-hindsight--plugin--config"></a>`config`

Data type: `Hash`

Plugin configuration

Default value: `{}`

##### <a name="-hindsight--plugin--manage_service"></a>`manage_service`

Data type: `Boolean`

When true Hindsight service will be restarted upon change

Default value: `$hindsight::manage_service`

##### <a name="-hindsight--plugin--service_name"></a>`service_name`

Data type: `String`

Hindsight service name

Default value: `$hindsight::service_name`

##### <a name="-hindsight--plugin--run_dir"></a>`run_dir`

Data type: `Stdlib::Absolutepath`

sandbox_run directory

Default value: `$hindsight::run_dir`

##### <a name="-hindsight--plugin--content"></a>`content`

Data type: `Optional[String]`

Template to load config from

Default value: `undef`

##### <a name="-hindsight--plugin--source"></a>`source`

Data type: `Optional[String]`

Path from which config should be loaded

Default value: `undef`

## Functions

### <a name="hindsight_escape"></a>`hindsight_escape`

Type: Ruby 4.x API

Escape string values

#### `hindsight_escape(Any *$args)`

The hindsight_escape function.

Returns: `Any`

##### `*args`

Data type: `Any`



