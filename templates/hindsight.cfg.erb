#!/usr/bin/env lua

output_path             = "<%= @output_dir %>"
output_size             = 64 * 1024 * 1024
sandbox_load_path       = nil -- disable dynamic loading
sandbox_run_path        = "<%= @conf_dir %>/run"
-- sandbox_install_path    = "/usr/share/luasandbox/sandboxes/heka" -- default

analysis_threads        = <%= @analysis_threads %>
analysis_lua_path       = "<%= @analysis_lua_path %>"
analysis_lua_cpath      = "<%= @analysis_lua_cpath %>"
io_lua_path             = analysis_lua_path ..  ";<%= @io_lua_path %>"
io_lua_cpath            = analysis_lua_cpath .. ";<%= @io_lua_cpath %>"

max_message_size        = <%= @max_message_size %>
-- backpressure            = 0 -- default
-- backpressure_disk_free  = 4 -- default
<% if @hostname -%>
hostname                = "<%= @hostname %>" -- default gethostname()
<% end -%>

analysis_defaults = {
<% @analysis_defaults.sort.each do |k, v| -%>
  <%= k %> = <%= v %>,
<% end -%>
}

input_defaults = {
<% @input_defaults.sort.each do |k, v| -%>
  <%= k %> = <%= v %>,
<% end -%>
}

output_defaults = {
<% @output_defaults.sort.each do |k, v| -%>
  <%= k %> = <%= v %>,
<% end -%>
}
